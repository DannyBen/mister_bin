require "runfile-tasks"
require "byebug"
require_relative 'lib/mister_bin'
require_relative 'lib/mister_bin/version'

include MisterBin

title   "Mister Bin Developer Toolbelt"
summary "Runfile tasks for building the Mister Bin gem"
version VERSION

RunfileTasks::RubyGems.all 'mister_bin'
RunfileTasks::Testing.rspec
RunfileTasks::Docs.rdoc

help   "Run YARD server"
action :yard do
  system "yard server -p3000 -B0.0.0.0 -r"
end

help   "Run interactive console"
action :console, :c do
  system "bundle exec bin/console"
end

help   "Generate TOC to toc.txt"
action :toc do
  exec 'gh-md-toc README.md > toc.txt'
end

help   "Generate changelog and append old changelog"
action :changelog do
  system "git changelog --save"
  # append older changelog (prior to switching to git-changelog)
  system "cat .changelog.old.md >> CHANGELOG.md"
end

require_relative 'debug' if File.exist? 'debug.rb'
